{% extends "base.html" %}

{% block content %}

<h2><i class="bi bi-person-gear"></i> My Profile</h2>
<p>Update your personal and contact details below.</p>

<form method="post" class="mt-3">
    {% csrf_token %}

    <div class="row">
        <div class="col-md-6">
            <h4>Account details</h4>
            {{ uform.as_p }}

            <!-- Accessibility Section (moved up under Account details) -->
            <h4 class="mt-4">Accessibility</h4>

            <div class="form-check mt-2">
                <input class="form-check-input"
                    type="checkbox"
                    id="id_dyslexia_mode"
                    name="dyslexia_mode"
                    {% if request.user.personnel.dyslexia_mode %}checked{% endif %}>
                <label class="form-check-label" for="id_dyslexia_mode">
                    Enable Dyslexia-friendly mode
                </label>
            </div>

            <!-- Pastel background selector -->
            <div id="pastel-options"
                class="mt-3"
                {% if not request.user.personnel.dyslexia_mode %}style="display:none"{% endif %}>
                <label><strong>Pastel background colour</strong></label>
                <select name="pastel_background" class="form-select mt-1">
                    <option value="none"   {% if request.user.personnel.pastel_background == "none" %}selected{% endif %}>Default (off-white)</option>
                    <option value="cream"  {% if request.user.personnel.pastel_background == "cream" %}selected{% endif %}>Cream</option>
                    <option value="yellow" {% if request.user.personnel.pastel_background == "yellow" %}selected{% endif %}>Soft Yellow</option>
                    <option value="blue"   {% if request.user.personnel.pastel_background == "blue" %}selected{% endif %}>Soft Blue</option>
                    <option value="green"  {% if request.user.personnel.pastel_background == "green" %}selected{% endif %}>Soft Green</option>
                </select>
            </div>
        </div>

        <div class="col-md-6">
            <h4>Contact & bank details</h4>
            {{ pform.as_p }}
        </div>
    </div>

    <div class="mt-3 d-flex gap-2">
        <button class="btn btn-primary">Save changes</button>

        <a href="{% url 'password_change' %}" class="btn btn-outline-secondary">
            <i class="bi bi-key"></i> Change password
        </a>
    </div>

</form>

<script>
document.getElementById("id_dyslexia_mode").addEventListener("change", function() {
    document.getElementById("pastel-options").style.display =
        this.checked ? "block" : "none";
});
</script>

{% endblock %}
